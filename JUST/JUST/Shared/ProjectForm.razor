@using JUST.Data.Models;
@using JUST.Data;
@using System.ComponentModel.DataAnnotations;
@inject IProjectData _db;

<h3>ProjectForm</h3>

<div>
    <EditForm Model="@project" OnValidSubmit="@InsertProject">
        @*<DataAnnotationsValidator />
        <ValidationSummary />*@

        <InputText id="title" @bind-Value="@project.Title" />
    </EditForm>
                

    <button type="submit"> Submit </button>
</div>

@code {
    DisplayProject project = new DisplayProject();

    private async Task InsertProject()
    {
        Console.WriteLine(project.Title);
        Project newProject = new Project();
        newProject.Title = project.Title;
        await _db.AddProject(newProject);
        project = new DisplayProject();
    }

    private class DisplayProject{

        [MaxLength(20)]
        [MinLength(2)]
        public string Title { get; set; }
    }
}
