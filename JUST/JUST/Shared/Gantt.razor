@page "/gantt"
@using Syncfusion.Blazor.Gantt
@using JUST.Data;
@using JUST.Data.Models;

@inject ITasksData _db;
<SfGantt DataSource="@TaskList" Toolbar="@(new List<string>() { "ZoomIn", "ZoomOut", "ZoomToFit" })" Height="850px" Width="1500px">
<GanttTaskFields Id="ID" Name="Name" StartDate="StartDate" EndDate="EndDate" Duration="Duration" Progress="Progress" Child="SubTasks">
</GanttTaskFields>
<GanttColumns>
    <GanttColumn Field="ID" HeaderText="ID" Width="80"></GanttColumn>
    <GanttColumn Field="Name" HeaderText="Name" Width="150"></GanttColumn>
    <GanttColumn Field="StartDate" HeaderText="Start Date" Width="150"></GanttColumn>
    <GanttColumn Field="EndDate" HeaderText="End Date" Width="150"></GanttColumn>
    <GanttColumn Field="Duration" HeaderText="Duration" Width="100"></GanttColumn>
</GanttColumns>
<GanttTimelineSettings TimelineUnitSize=120 TimelineViewMode="TimelineViewMode.Month"></GanttTimelineSettings>
</SfGantt>

@code{
	public List<JustTask> TaskList = new List<JustTask>();

	protected override async Task OnInitializedAsync()
	{
		this.TaskList = await _db.GetTasks();
	}
}